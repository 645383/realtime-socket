<script type='text/javascript'>

    window.realtime.messageQueue2 = [];
    window.realtime.messageQueue3 = [];

    if (typeof io != 'undefined' && io != null) {
        window.realtime.token = '<%= @realtime_token %>';
        window.realtime.socketIo2 = io.connect('<%= realtime_server_url %>/?_rtUserId=2&_rtToken=<%= @realtime_token %>');
        window.realtime.socketIo3 = io.connect('<%= realtime_server_url %>/?_rtUserId=3&_rtToken=<%= @realtime_token %>');

        window.realtime.userId2 = 2;
        window.realtime.userId3 = 3;
    }

    window.realtime.socketIo2.on('connect', function () {
        window.realtime.socketIo2.emit('realtime_user_id_connected', { userId: 2 });
    });

    window.realtime.socketIo2.on('realtime_msg', function(message) {
        window.realtime.messageQueue2.push(message);
    });

    window.realtime.socketIo3.on('connect', function () {
        window.realtime.socketIo3.emit('realtime_user_id_connected', { userId: 3 });
    });

    window.realtime.socketIo3.on('realtime_msg', function(message) {
        window.realtime.messageQueue3.push(message);
    });

</script>